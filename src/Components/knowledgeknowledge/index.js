const iconsData = [
  {
    url: "./assets/img/icons/htmlIcon.svg",
    alt: "html ícone",
    bgColor: "#F1662A",
    textColor: "#FFF",
  },
  {
    url: "./assets/img/icons/cssIcon.svg",
    alt: "css ícone",
    bgColor: "#33A9DC",
    textColor: "#FFF",
  },
  {
    url: "./assets/img/icons/jsIcon.svg",
    alt: "java script ícone",
    bgColor: "#000000",
    textColor: "#F7DF1E",
  },
  {
    url: "./assets/img/icons/gitIcon.svg",
    alt: "git ícone",
    bgColor: "#E44C30",
    textColor: "#000",
  },
  {
    url: "./assets/img/icons/githubIcon.svg",
    alt: "github ícone",
    bgColor: "#fff",
    textColor: "#000",
  },
  {
    url: "./assets/img/icons/bootstrapIcon.svg",
    alt: "bootstrap ícone",
    bgColor: "#7E13F8",
    textColor: "#FFF",
  },
  {
    url: "./assets/img/icons/sassIcon.svg",
    alt: "sass ícone",
    bgColor: "#FFF",
    textColor: "#CD6799",
  },
  {
    url: "./assets/img/icons/styledIcon.svg",
    alt: "styled ícone",
    bgColor: "#FF6196",
    textColor: "#FFF",
  },
  {
    url: "./assets/img/icons/tsIcon.svg",
    alt: "type script ícone",
    bgColor: "#FFF",
    textColor: "#3178C6",
  },
  {
    url: "./assets/img/icons/reactIcon.svg",
    alt: "react ícone",
    bgColor: "#00D8FF",
    textColor: "#272626",
  },
  {
    url: "./assets/img/icons/firebaseIcon.svg",
    alt: "firebase ícone",
    bgColor: "#FCCA3F",
    textColor: "#272626",
  },
  {
    url: "./assets/img/icons/figmaIcon.svg",
    alt: "figma ícone",
    bgColor: "#0ACF83",
    textColor: "#272626",
  },
  {
    url: "./assets/img/icons/databaseIcon.svg",
    alt: "databases ícone",
    bgColor: "#FFF",
    textColor: "#000000",
  },
  {
    url: "./assets/img/icons/vscodeIcon.svg",
    alt: "vs code ícone",
    bgColor: "#0065A9",
    textColor: "#272626",
  },
  {
    url: "./assets/img/icons/nextIcon.svg",
    alt: "nextJS ícone",
    bgColor: "#272626",
    textColor: "#FFF",
  },
  {
    url: "./assets/img/icons/authIcon.svg",
    alt: "auth ícone",
    bgColor: "#FFF",
    textColor: "#F12A2A",
  },
  {
    url: "./assets/img/icons/nodeIcon.svg",
    alt: "node ícone",
    bgColor: "#000000",
    textColor: "#83CD29",
  },
  {
    url: "./assets/img/icons/apiIcon.svg",
    alt: "APIs ícone",
    bgColor: "#33A9DC",
    textColor: "#FFF",
  },
  {
    url: "./assets/img/icons/jestIcon.svg",
    alt: "Jest",
    bgColor: "#FFF",
    textColor: "#9A405B",
  },
  {
    url: "./assets/img/icons/cmsIcon.svg",
    alt: "Jest",
    bgColor: "#FFF",
    textColor: "#7D0BFF",
  },
];
const textData = [
  {
    title: "HTML",
    conhecimento: "Avançado",
    texto:
      "Possuo conhecimento avançado na utilização <b>HTML</b> focando sempre na implantação de uma correta estrutura semântica com as tags modernas do <b>HTML 5</b>, em conjunto a isso tenho conhecimento básico em <b>EJS</b> e avançado em <b>JSX / TSX</b> algo essencial para o <b>React</b>",
  },
  {
    title: "CSS",
    conhecimento: "Avançado",
    texto:
      "O <b>CSS</b> é uma das minhas ferramentas preferidas independentemente de sua implantação, possuo conhecimento avançado em sua utilização tanto em seletores,  <b>box-model</b>, animações, transições e em  propriedades fundamentais como o <b>Flex</b> e o <b>Grid</b> ",
  },
  {
    title: "JavaScript",
    conhecimento: "Avançado",
    texto:
      "Desde a primeira vez que utilizei tenho o <b>JS</b> como minha linguagem de programação favorita, possuo conhecimento avançado em diversos de seus aspectos, seja em seus paradigmas, com funções construtoras ou classes, <b>AJAX</b> com fetch ou axios, métodos nativos, consumo de APIs, utilizando tipagem com o superset <b>TS</b>, e principalmente em sua utilização com o React ",
  },
  {
    title: "Git",
    conhecimento:
      "Intermediário - Avançado",
    texto:
      "O <b>Git</b> se apresenta como uma das principais ferramentas para um desenvolvedor, possuo conhecimento em seus processos para <b>controle de versão</b>, para realização de clonagem, pull, push, merge, etc.",
  },
  {
    title: "Github",
    conhecimento:
      "Intermediário - Avançado",
    texto:
      "O <b>Github</b> cada vez mais se torna algo essencial por complementar a utilização do <b>Git</b>, possuo conhecimento em sua utilização como desenvolvedor, para manutenção de repositórios ou mesmo funcionalidades relacionadas a utilização do seu provider",
  },
  {
    title: "Bootstrap",
    conhecimento: "Intermediário",
    texto:
      "Uma das primeiras ferramentas que aprendi foi o <b>Bootstrap</b> para a criação de layouts concisos e responsivos de maneira mais rápida, possuo conhecimento na implementação do seu sistema de <b>Grid</b> com rows e columns ",
  },
  {
    title: "ReactJS",
    conhecimento: "Avançado",
    texto:
      "O <b>React</b> após o <b>JS</b> vanilla é o core dos meus estudos, possuo conhecimento avançado na sua implantação moderna em forma de <b>Hooks</b>, em seu sistema de <b>renderização e re-renderização</b>, e em todo seu ecossistema para estilização, criação de rotas, consumo de APIs, etc.",
  },
  {
    title: "Figma",
    conhecimento:
      "Intermediário - Avançado",
    texto:
      "O <b>Figma</b> me foi apresentado na faculdade e atualmente é uma das principais ferramentas que utilizo tanto na idealização de projetos quanto para criação de <b>SVGs</b>, e em ambiente acadêmico já realizei criações de interfaces seguindo diretrizes de <b>UI / UX</b> com o <b>Figma</b>",
  },
  {
    title: "Databases",
    conhecimento: "Intermediário",
    texto:
      "Possuo conhecimento no ciclo completo de Databases <b>noSQL</b> em especial o <b>faunaDB, Firebase, MongoDB,</b> e conhecimento avançado no consumo de dados vindos de databases em especial em ambiente <b>React</b>",
  },
  {
    title: "Visual Studio Code",
    conhecimento: "Avançado",
    texto:
      "O <b>VS code</b> dentre  todas as IDEs que utilizei foi a que mais senti facilidade tanto para personalização quanto para trabalhar em si, possuo conhecimentos avançados em sua utilização",
  },

  {
    title: "Consumo de APIs",
    conhecimento: "Avançado",
    texto:
      "O consumo de <b>APIs</b> é uma das principais tarefas de um sistema front-end, é algo muito explorado em meus projetos onde busco sempre aprimorar não só a forma de requisição mas como também de exibição dos dados, tenho experiências com APIs próprias criadas com CMSs, APIs de pagamento,  APIs de databases, etc.",
  },
  {
    title: "PHP",
    conhecimento: "Avançado",
    texto:
      "Desde a primeira vez que utilizei tenho o <b>PHP</b>",
  },
  {
    title: "Laravel",
    conhecimento: "Basico",
    texto:
      "Desde a primeira vez que utilizei tenho o <b>PHP</b>",
  },
  {
    title: "Docker",
    conhecimento: "Intermediário",
    texto:
      "Desde a primeira vez que utilizei tenho o <b>PHP</b>",
  },
  {
    title: "Pacote Office",
    conhecimento: "Avançado",
    texto:
      "Desde a primeira vez que utilizei tenho o <b>PHP</b>",
  },
  {
    title: "Adobe Photoshop",
    conhecimento: "Avançado",
    texto:
      "Desde a primeira vez que utilizei tenho o <b>PHP</b>",
  },
  {
    title: "Camtasia",
    conhecimento: "Avançado",
    texto:
      "Desde a primeira vez que utilizei tenho o <b>PHP</b>",
  },
];

const projectsData = [
  {
    title:
      "#1 Ecommerce - HTML CSS JS PHP",
    imgUrl:
      "./assets/img/projects/1Ecommerce.png",
    appUrl: "#",
    githubUrl:
      "https://github.com/Ninguem2k/1Primeiro-Ecommerce-2018",
    color: "#EBA418",
  },
  {
    title:
      "#2 Ecommerce - Laravel - incompleto",
    imgUrl:
      "./assets/img/projects/2Ecommerce.png",
    appUrl: "#",
    githubUrl:
      "https://github.com/Ninguem2k/MS-ecommerce-laravel.git",
    color: "#4C255C",
  },
  {
    title: "Ordem de Serviços (OS)",
    imgUrl:
      "./assets/img/projects/OS.png",
    appUrl: "#",
    githubUrl:
      "https://github.com/Ninguem2k/7System_OS.git",
    color: "#C5283D",
  },
];
const changeChild = (
  parent,
  add,
  remove
) => {
  parent.appendChild(add);
  if (remove)
    parent.removeChild(remove);
};
const createIconElement = (
  url,
  alt
) => {
  const IMG =
    document.createElement("img");
  IMG.src = url;
  IMG.alt = alt;
  return IMG;
};
//importação geral
const chosenItem =
  document.querySelector(".chosenItem");
const indicator =
  document.querySelector(".support");
let interval1;
let interval2;

function changeIcon() {
  let index = 0;
  //troca de icons
  interval1 = setInterval(() => {
    if (index === iconsData.length)
      index = 0;

    const url = iconsData[index].url;
    const alt = iconsData[index].alt;
    const newIcon = createIconElement(
      url,
      alt
    );
    newIcon.classList.add(
      "iconKnowledge"
    );
    const previousIcon =
      chosenItem.lastElementChild;

    changeChild(
      chosenItem,
      newIcon,
      previousIcon
    );

    changePresentation();
    index++;
    clearInterval(interval2);
    loading();
  }, 10000 /* 10 segundos */);

  //loading bar
  const loading = () => {
    let percentage = 100;
    interval2 = setInterval(() => {
      if (percentage === 0)
        percentage = 100;
      percentage--;
      loadingBar(percentage);
    }, 100);
  };
  const loadingBar = (percentage) => {
    indicator.style.width = `${percentage}%`;
  };
  loading();
}
changeIcon();

function choose() {
  document.addEventListener(
    "click",
    (e) => {
      const target = e.target;
      if (
        target.classList.contains(
          "iconKnowledge"
        )
      ) {
        const newIcon =
          createClone(target);
        const previousIcon =
          chosenItem.lastElementChild;

        changeChild(
          chosenItem,
          newIcon,
          previousIcon
        );
        changePresentation();
        pauseInterval();
      }
    }
  );
  const createClone = (element) => {
    const newElement =
      element.cloneNode(true);
    newElement.style.opacity = "1";
    return newElement;
  };
}
choose();

function pauseInterval() {
  clearInterval(interval1);
  clearInterval(interval2);
  indicator.style.width = "100%";
}

function addIcons() {
  const toolsContainer =
    document.querySelector(
      ".toolsContainer"
    );
  iconsData.forEach((icon) => {
    const IMG = createIconElement(
      icon.url,
      icon.alt
    );
    IMG.classList.add("iconKnowledge");

    toolsContainer.appendChild(IMG);
  });
}
addIcons();

function changePresentation() {
  const currentIcon =
    document.querySelector(
      ".iconKnowledge"
    );
  let currentIconObj;

  const presentationContainer =
    document.querySelector(
      ".presentationContainer"
    );
  const presentation =
    document.querySelector(
      ".presentation"
    );
  const card =
    document.querySelector(".card");

  let presentationIndex;
  //função para definir o correto index para o texto apresentado
  iconsData.forEach((icon, index) => {
    const currentIconUrl =
      currentIcon.src.split("/")[
        currentIcon.src.split("/")
          .length - 1
      ];
    const iconUrl =
      icon.url.split("/")[
        icon.url.split("/").length - 1
      ];
    if (currentIconUrl === iconUrl) {
      currentIconObj = icon;
      presentationIndex = index;
    }
  });
  //recuperando o objeto correto
  const currentText =
    textData[presentationIndex];
  //modificando os texts
  card.firstElementChild.innerHTML =
    currentText.title;
  presentation.childNodes[5].innerHTML =
    currentText.conhecimento;
  presentation.childNodes[9].innerHTML =
    currentText.texto;
  //modificando estilo
  presentationContainer.style.backgroundColor =
    currentIconObj.bgColor;
  presentation.style.color =
    currentIconObj.textColor;
}
changePresentation();

function slideShow() {
  const carousel =
    document.querySelector(
      ".carouselContainer"
    );
  const carouselDots =
    document.querySelector(
      ".carouselDots"
    );

  const projectLinkApp =
    document.querySelector(
      ".projectLinkApp"
    );
  const projectLinkGithub =
    document.querySelector(
      ".projectLinkGithub"
    );

  const projectLinkImg =
    document.querySelector(
      ".projectLinkImg"
    );

  let index = 0;
  let currentInterval;

  selectProject(index);

  //slide automático
  const slideInterval = () =>
    (currentInterval = setTimeout(
      () => alterIndex(1),
      5000
    ));
  slideInterval();

  carousel.addEventListener(
    "click",
    (e) => {
      const target = e.target;

      if (
        target.classList.contains(
          "leftArrow"
        ) ||
        target.classList.contains(
          "rightArrow"
        )
      ) {
        target.classList.contains(
          "leftArrow"
        )
          ? alterIndex(-1)
          : alterIndex(1);
      }
    }
  );

  function alterIndex(value) {
    index = index + value;

    if (index < 0)
      index = projectsData.length - 1;
    if (index > projectsData.length - 1)
      index = 0;

    selectProject(index);
    dotSelected(index);
    clearTimeout(currentInterval);
    slideInterval();
  }

  function selectProject(index) {
    //recuperando o objeto referente ao index
    const project = projectsData[index];
    //trocando utl dos links
    projectLinkApp.href =
      project.appUrl;
    projectLinkGithub.href =
      project.githubUrl;

    projectLinkImg.href =
      project.appUrl;

    projectLinkApp.innerHTML =
      project.title;
    changeBgColor(
      projectLinkApp,
      project.color
    );

    const newProjectImg =
      createIconElement(
        project.imgUrl,
        project.title
      );
    changeChild(
      projectLinkImg,
      newProjectImg,
      projectLinkImg.firstElementChild
    );
  }

  function changeBgColor(
    element,
    color
  ) {
    element.style.backgroundColor =
      color;
  }

  function setDots() {
    for (
      let i = 0;
      i < projectsData.length;
      i++
    ) {
      const span =
        document.createElement("span");
      carouselDots.appendChild(span);
    }
  }

  setDots();
  dotSelected(index);

  function dotSelected(index) {
    carouselDots.childNodes.forEach(
      (element, i) => {
        if (
          element.classList.contains(
            "selected"
          )
        )
          element.classList.remove(
            "selected"
          );
        if (i === index) {
          element.classList.add(
            "selected"
          );
        }
      }
    );
  }
}
slideShow();

function smoothScroll() {
  document
    .querySelectorAll('a[href^="#"]')
    .forEach((anchor) => {
      anchor.addEventListener(
        "click",
        function (e) {
          e.preventDefault();

          document
            .querySelector(
              this.getAttribute("href")
            )
            .scrollIntoView({
              behavior: "smooth",
            });
        }
      );
    });
}
smoothScroll();

window.addEventListener(
  "scroll",
  itemsApear
);

function itemsApear() {
  const windowHeight =
    window.innerHeight;
  const elementVisible = 150;

  const reveals =
    document.querySelectorAll(
      ".reveal"
    );
  reveals.forEach((element) => {
    const elementTop =
      element.getBoundingClientRect()
        .top;

    if (
      elementTop <
      windowHeight - elementVisible
    ) {
      element.classList.add("active");
    } else {
      element.classList.remove(
        "active"
      );
    }
  });
}
itemsApear();
